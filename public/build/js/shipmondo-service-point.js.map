{"version":3,"file":"../js/shipmondo-service-point.js","mappings":"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","sources":["webpack://shipmondo-for-woocommerce/./resources/js/shipmondo-service-point.js"],"sourcesContent":["jQuery(document).ready(function($) {\r\n    // Get parent wrapper\r\n    function getWrapper(element) {\r\n        return element.parents('.shipmondo_service_point_selection')\r\n    }\r\n\r\n    // get the shipping index from the parent\r\n    function getShippingIndex(element) {\r\n        return getWrapper(element).data('shipping_index')\r\n    }\r\n\r\n    // get the shipping index from the parent\r\n    function getShippingAgent(element) {\r\n        return getWrapper(element).data('shipping_agent')\r\n    }\r\n\r\n    function getSelectedServicePoint(element) {\r\n        return getWrapper(element).data('selected_service_point')\r\n    }\r\n\r\n    function setSelectedServicePoint(element, servicePoint) {\r\n        getWrapper(element).data('selected_service_point', servicePoint)\r\n    }\r\n\r\n    // Set HTML and input fields\r\n    function setShopHTML(index, servicePoint, servicePointElement) {\r\n        const wrapper = getWrapper(servicePointElement)\r\n\r\n        wrapper.find('input[name=\"shipmondo[' + index + ']\"]').val(servicePoint.id)\r\n        wrapper.find('input[name=\"shop_name[' + index + ']\"]').val(servicePoint.name)\r\n        wrapper.find('input[name=\"shop_address[' + index + ']\"]').val(servicePoint.address)\r\n        wrapper.find('input[name=\"shop_zip[' + index + ']\"]').val(servicePoint.zipcode)\r\n        wrapper.find('input[name=\"shop_city[' + index + ']\"]').val(servicePoint.city)\r\n\r\n        wrapper.find('.selected_service_point .name').html(servicePoint.name)\r\n        wrapper.find('.selected_service_point .address_info').html(servicePointElement.data('address'))\r\n        wrapper.find('.selected_service_point .distance').html(servicePointElement.data('distance'))\r\n\r\n        wrapper.find('.service_point.selected').removeClass('selected')\r\n        servicePointElement.addClass('selected')\r\n    }\r\n\r\n    // Set shop session\r\n    function setSelectionSession(shop, agent, index) {\r\n        $.post(shipmondo.ajax_url,\r\n            {\r\n                'action': 'shipmondo_set_selection_session',\r\n                'selection': shop,\r\n                'agent': agent,\r\n                'shipping_index': index,\r\n            }, function(result) {\r\n\r\n            })\r\n    }\r\n\r\n    // Service point selected\r\n    function ServicePointSelected(shopElement) {\r\n        var index = getShippingIndex(shopElement)\r\n        var agent = getShippingAgent(shopElement)\r\n        const selectedServicePoint = getSelectedServicePoint(shopElement)\r\n\r\n        const servicePoint = shopElement.data('service_point')\r\n\r\n        if(selectedServicePoint.id === servicePoint.id) {\r\n            return\r\n        }\r\n\r\n        var shop = {\r\n            'id': servicePoint.id,\r\n            'name': servicePoint.name,\r\n            'address': servicePoint.address,\r\n            'zipcode': servicePoint.zipcode,\r\n            'city': servicePoint.city,\r\n        }\r\n\r\n        setSelectedServicePoint(shopElement, servicePoint)\r\n\r\n        setSelectionSession(shop, agent, index)\r\n\r\n        setShopHTML(index, shop, shopElement)\r\n    }\r\n\r\n    // DROPDOWN\r\n    $(document).on('click', '.selected_service_point.selector_type-dropdown', function(e) {\r\n        e.stopPropagation()\r\n        toggleDropdown(getDropdown($(this)))\r\n    })\r\n\r\n    function getDropdown(element) {\r\n        return getWrapper(element).find('.shipmondo-dropdown')\r\n    }\r\n\r\n    function toggleDropdown(dropdown) {\r\n        if(dropdown.hasClass('open')) {\r\n            closeDropdown(modal)\r\n        } else {\r\n            openDropdown(modal)\r\n        }\r\n    }\r\n\r\n\r\n    // MODAL\r\n\r\n    // Show modal\r\n    $(document).on('click', '.shipmondo-original .selected_service_point.selector_type-modal', function(e) {\r\n        e.stopPropagation()\r\n        openModal(getModal($(e.target)))\r\n    })\r\n\r\n    // Hide modal on close button\r\n    $(document).on('click', '.shipmondo-original .shipmondo-modal_close', function(e) {\r\n        e.preventDefault()\r\n        closeModal(getModal($(e.target)))\r\n    });\r\n\r\n    // Hide modal when clicking outsite modal content\r\n    $(document).on('click', '.shipmondo-original .shipmondo-modal', function(e) {\r\n        if(typeof e.target !== 'undefined' && $(e.target).hasClass('shipmondo-modal')) {\r\n            closeModal(getModal($(e.target)))\r\n        }\r\n    });\r\n\r\n    function getModal(element) {\r\n        return getWrapper(element).find('.shipmondo-modal')\r\n    }\r\n\r\n    function openModal(modal) {\r\n        modal.removeClass('shipmondo-hidden')\r\n\r\n        initializeMap(modal)\r\n\r\n        setTimeout(function() {\r\n            $('body').addClass('shipmondo_modal_open')\r\n            modal.addClass('visible')\r\n            modal.find('.shipmondo-modal_content').addClass('visible')\r\n        }, 100)\r\n    }\r\n\r\n    function closeModal(modal) {\r\n        modal.removeClass('visible')\r\n\r\n        $('body').removeClass('shipmondo_modal_open')\r\n\r\n        setTimeout(function() {\r\n            $('.shipmondo-modal-checkmark').removeClass('visible')\r\n            modal.addClass('shipmondo-hidden')\r\n        }, 300)\r\n    }\r\n\r\n    function loadGoogleMaps() {\r\n        // Create the script tag, set the appropriate attributes\r\n        var script = document.createElement('script')\r\n        script.src = 'https://maps.googleapis.com/maps/api/js?key=' + shipmondo['google_maps_api_key'] + '&loading=async&callback=googleMapsInit'\r\n        script.async = true\r\n\r\n        // Append the 'script' element to 'head'\r\n        document.head.appendChild(script)\r\n    }\r\n\r\n    // Render map\r\n    var map = null\r\n    var bounds = null\r\n    var infowindow = null\r\n\r\n    function renderMap(element) {\r\n        map = new google.maps.Map(element[0], {\r\n            zoom: 6,\r\n            center: {lat: 55.9150835, lng: 10.4713954},\r\n            mapTypeControl: false,\r\n            streetViewControl: false,\r\n            fullscreenControl: false\r\n        })\r\n\r\n        infowindow = new google.maps.InfoWindow()\r\n\r\n        bounds = new google.maps.LatLngBounds()\r\n\r\n        const servicePoints = element.data('service_points')\r\n\r\n        const selectedServicePoint = getSelectedServicePoint(element)\r\n\r\n        $.each(servicePoints, function(index, element) {\r\n            shipmondoLoadMarker(element, selectedServicePoint)\r\n        });\r\n\r\n        setTimeout(function () {\r\n            map.fitBounds(bounds)\r\n        }, 100)\r\n    }\r\n\r\n    // Render Markers\r\n    function shipmondoLoadMarker(data, selectedServicePoint) {\r\n        var marker = new google.maps.Marker({\r\n            position: {lat: parseFloat(data.latitude), lng: parseFloat(data.longitude)},\r\n            map: map,\r\n            icon: {\r\n                url: selectedServicePoint.id === data.id ? shipmondo['icon_url_selected'] : shipmondo['icon_url'],\r\n                size: new google.maps.Size(48, 48),\r\n                scaledSize: new google.maps.Size(48, 48),\r\n                anchor: new google.maps.Point(24, 24)\r\n            }\r\n        })\r\n\r\n        google.maps.event.addListener(marker, 'click', (function (marker) {\r\n            return function () {\r\n                infowindow.setContent('<strong>' + data.company_name + '</strong><br/>' + data.address + \"<br/> \" + data.city + ' <br/> ' + data.zipcode + '<br/><div id=\"shipmondo-button-wrapper\"><button class=\"button\" id=\"shipmondo-select-shop\" data-number=\"' + data.number + '\">' + shipmondo.select_shop_text + '</button></div>')\r\n                infowindow.open(map, marker)\r\n            }\r\n        })(marker))\r\n\r\n        bounds.extend(marker.position)\r\n    }\r\n\r\n    var currentModalElement = null\r\n\r\n    function initializeMap(modal) {\r\n        if(typeof google === 'undefined' || typeof google.maps === 'undefined') {\r\n            currentModalElement = modal\r\n            loadGoogleMaps()\r\n        } else {\r\n            renderMap(modal.find('.service_points_map'))\r\n        }\r\n    }\r\n\r\n    // Render map after google maps load\r\n    $(document).on('googleMapsLoaded', function() {\r\n        renderMap(currentModalElement.find('.service_points_map'))\r\n    })\r\n\r\n    // Select shop\r\n    $(document).on('click', '.shipmondo-original .selector_type-modal .service_points_list .service_point', function() {\r\n        ServicePointSelected($(this));\r\n\r\n        $('.shipmondo-modal_content').removeClass('visible');\r\n        $('.shipmondo-modal-checkmark').addClass('visible');\r\n\r\n        const modal = getModal($(this))\r\n\r\n        setTimeout(function() {\r\n            closeModal(modal);\r\n        }, 1800);\r\n    });\r\n\r\n    // Select shop\r\n    $(document).on('click', '.shipmondo-original #shipmondo-select-shop', function(e) {\r\n        e.preventDefault();\r\n\r\n        var servicePointElement = getWrapper($(this)).find('.service_point[data-id=' + $(this).data('number') + ']');\r\n\r\n        servicePointElement.trigger('click');\r\n    });\r\n\r\n    // DROPDOWN\r\n    // Open dropdown\r\n    $(document).on('click', '.shipmondo-original .selected_service_point.selector_type-dropdown', function(e) {\r\n        e.stopPropagation();\r\n        toogleDropdown($(this))\r\n    });\r\n\r\n    function getDropdown(element) {\r\n        return getWrapper(element).find('.shipmondo-dropdown_wrapper');\r\n    }\r\n\r\n    function toggleDropdown(element) {\r\n        const dropdown = getDropdown(element);\r\n\r\n        if(element.hasClass('visible')) {\r\n            closeDropdown(dropdown);\r\n        } else {\r\n            openDropdown(dropdown);\r\n        }\r\n    }\r\n\r\n    function openDropdown(dropdownElement) {\r\n        dropdownElement.addClass('visible');\r\n        getWrapper(dropdownElement).find('.selected_service_point').addClass('selector_open');\r\n    }\r\n\r\n    function closeDropdown(dropdownElement) {\r\n        dropdownElement.removeClass('visible');\r\n        getWrapper(dropdownElement).find('.selected_service_point').removeClass('selector_open');\r\n    }\r\n\r\n    // Hide dropdown when clicked outsite of it\r\n    $(document).on('click', function(e) {\r\n        var dropdown = $('.shipmondo-original .shipmondo-dropdown_wrapper.visible');\r\n\r\n        if(dropdown.length > 0 && (!dropdown.is(e.target) && dropdown.has(e.target).length === 0)) {\r\n            closeDropdown(dropdown);\r\n        }\r\n    })\r\n\r\n    // Set selected shop\r\n    $(document).on('click', '.shipmondo-original .selector_type-dropdown .service_points_list .service_point', function() {\r\n        ServicePointSelected($(this));\r\n\r\n        closeDropdown(getDropdown($(this)));\r\n    });\r\n});\r\n\r\nwindow.googleMapsInit = function googleMapsInit() {\r\n    jQuery(document).trigger('googleMapsLoaded');\r\n}"],"names":["jQuery","document","ready","$","getWrapper","element","parents","getShippingIndex","data","getShippingAgent","getSelectedServicePoint","setSelectedServicePoint","servicePoint","setShopHTML","index","servicePointElement","wrapper","find","val","id","name","address","zipcode","city","html","removeClass","addClass","setSelectionSession","shop","agent","post","shipmondo","ajax_url","result","ServicePointSelected","shopElement","selectedServicePoint","on","e","stopPropagation","toggleDropdown","getDropdown","dropdown","hasClass","closeDropdown","modal","openDropdown","openModal","getModal","target","preventDefault","closeModal","initializeMap","setTimeout","loadGoogleMaps","script","createElement","src","async","head","appendChild","map","bounds","infowindow","renderMap","google","maps","Map","zoom","center","lat","lng","mapTypeControl","streetViewControl","fullscreenControl","InfoWindow","LatLngBounds","servicePoints","each","shipmondoLoadMarker","fitBounds","marker","Marker","position","parseFloat","latitude","longitude","icon","url","size","Size","scaledSize","anchor","Point","event","addListener","setContent","company_name","number","select_shop_text","open","extend","currentModalElement","trigger","toogleDropdown","dropdownElement","length","is","has","window","googleMapsInit"],"sourceRoot":""}